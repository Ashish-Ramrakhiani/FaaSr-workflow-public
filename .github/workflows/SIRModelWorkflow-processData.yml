name: SIRModelWorkflow-processData

on:
    workflow_dispatch:
        inputs:
            OVERWRITTEN:
                description: "Overwritten fields"
                required: true
            PAYLOAD_URL:
                description: "URL to payload"
                required: true

jobs:
    run_docker_image:
        runs-on: ubuntu-latest
        container: izzylerman/faasr-github-actions-r:latest

        env:
            GH_PAT: ${{ secrets.GH_PAT}}
            MY_MINIO_BUCKET_AccessKey: ${{ secrets.MY_MINIO_BUCKET_AccessKey}}
            MY_MINIO_BUCKET_SecretKey: ${{ secrets.MY_MINIO_BUCKET_SecretKey}}
            OVERWRITTEN: ${{ github.event.inputs.OVERWRITTEN }}
            PAYLOAD_URL: ${{ github.event.inputs.PAYLOAD_URL }}

        steps:
          - name: Run Python entrypoint
            run: |
                cd /action
                python3 faasr_entry.py
